# Quick Start

## Install DynamoDB Toolbox

Using your favorite package manager, install DynamoDB Toolbox and AWS SDK v3 in your project by running one of the following commands:

```bash
# npm
npm install dynamodb-toolbox
npm install @aws-sdk/client-dynamodb

# yarn
yarn add dynamodb-toolbox
yarn add @aws-sdk/client-dynamodb

# pnpm
pnpm add dynamodb-toolbox
pnpm add @aws-sdk/client-dynamodb

```

## Add to your code

The `dynamodb-toolbox` package exports `Table` and `Entity` classes. Import or require them into your code as follows:

```javascript title="JavaScript"
const { Table, Entity } = require('dynamodb-toolbox')
```

```typescript title="TypeScript"
import { Table, Entity } from 'dynamodb-toolbox'
```

## Load the DocumentClient using aws-sdk v3

```typescript title="TypeScript"
import { DynamoDB } from '@aws-sdk/client-dynamodb'
import { DynamoDBClient } from '@aws-sdk/client-dynamodb'
import { DynamoDBDocumentClient } from '@aws-sdk/lib-dynamodb'

const marshallOptions = {
  // Specify your client options as usual
  convertEmptyValues: false
}

const translateConfig = { marshallOptions }

export const DocumentClient = DynamoDBDocumentClient.from(new DynamoDBClient(), translateConfig)
```

## Define a Table

```typescript
// Instantiate a table
const MyTable = new TableV2({
  // Specify table name (used by DynamoDB)
  name: 'test-table',

  // Define partition and sort keys
  partitionKey: {
    type: 'number',
    name: 'pk'
  },
  sortKey: {
    type: 'string',
    name: 'sk'
  },

  // Add the DocumentClient (optional)
  documentClient: DocumentClient
})
```

If you don't add a `documentClient` at instanciation time, you need to add it prior to any operation involving DynamoDB SDK (PutItem, GetItem, etc.):

```typescript
MyTable.documentClient = DocumentClient
```

## Define an Entity

```typescript
import {
  any,
  boolean,
  EntityV2,
  map,
  number,
  list
  schema,
  set,
  string,
} from 'dynamodb-toolbox'

const Customer = new EntityV2({
  // Specify entity name
  name: 'Customer',

  // Define attributes
  schema: schema({
    id: number().key().savedAs('pk'), // flag id attribute as partitionKey
    sk: string().key(), // sortKey
    age: number(), // set the attribute type
    name: string().savedAs('data'), // map 'name' to table attribute 'data'
    emailVerified: boolean().required(), // specify attribute as required
    isStaff: boolean().putDefault(false) // automatically put a default value if not defined
    details: map({ // define a map
      address: string(),
      other: any().optional() // define generic attributes with an any type
    })
    skills: set(string().enum('foo', 'bar')) // define a set of predefined values
    events: list(string()) // define an array
  }),

  // Assign it to our table
  table: MyTable
})
```

## Put an item

```typescript
// Create an item (using table attribute names or aliases)
const customer = {
  id: 123,
  sk: '15937f98-7db4-484b-abbb-362eb55e755a'
  age: 35,
  name: 'Jane Smith',
  emailVerified: true
}

// Build a PutItem command for Customer:
const putCustomerCommand = Customer.build(PutItem).item(customer)

// Display the parameters of the PutItem command
console.log(putCustomerCommand.params())

// Send the PutItem command
await putCustomerCommand.send()
```

The item will be saved to DynamoDB like this:

```typescript
{
  "pk": 123,
  "sk": "15937f98-7db4-484b-abbb-362eb55e755a",
  "age": 35,
  "data": "Jane Smith",
  "emailVerified": true,
  "isStaff": false
  // Attributes auto-generated by DynamoDB-Toolbox
  "_et": "customer", // Entity name (required for parsing)
  "_ct": "2021-01-01T00:00:00.000Z", // Item creation date (optional)
  "_md": "2021-01-01T00:00:00.000Z" // Item last modification date (optional)
}
```

## Get an Item

```typescript
// Specify primary key and sort key
const key = {
  id: 123,
  sk: '15937f98-7db4-484b-abbb-362eb55e755a'
}

// Build a GetItem command for Customer
const getCustomerCommand = Customer.build(GetItemCommand).key(key)

// Display the parameters of the GetItem command
console.log(getCustomerCommand.params())

// Send the GetItem command
const { Item } = await getCustomerCommand.send()
```
